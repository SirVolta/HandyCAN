<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HandyCanNode: include/HandyCAN.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HandyCanNode
   &#160;<span id="projectnumber">0.1Beta</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">HandyCAN.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HandyCAN node library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="stm32f10x__conf_8h_source.html">stm32f10x_conf.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for HandyCAN.h:</div>
<div class="dyncontent">
<div class="center"><img src="HandyCAN_8h__incl.png" border="0" usemap="#include_2HandyCAN_8h" alt=""/></div>
<map name="include_2HandyCAN_8h" id="include_2HandyCAN_8h">
<area shape="rect" id="node2" href="stm32f10x__conf_8h.html" title="STM32 configuration file. " alt="" coords="430,80,569,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="HandyCAN_8h__dep__incl.png" border="0" usemap="#include_2HandyCAN_8hdep" alt=""/></div>
<map name="include_2HandyCAN_8hdep" id="include_2HandyCAN_8hdep">
<area shape="rect" id="node2" href="HandyCAN_8c.html" title="HandyCAN node library. " alt="" coords="5,80,132,107"/>
<area shape="rect" id="node3" href="main_8c.html" title="HandyCAN node library test. " alt="" coords="156,80,245,107"/>
</map>
</div>
</div>
<p><a href="HandyCAN_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structHandyCAN__package.html">HandyCAN_package</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">local state and configuration info  <a href="structHandyCAN__package.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9e10f04158ceed191b910e1efddfe4ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a9e10f04158ceed191b910e1efddfe4ad">HC_VERSION</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a9e10f04158ceed191b910e1efddfe4ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current version of handycan.  <a href="#a9e10f04158ceed191b910e1efddfe4ad">More...</a><br /></td></tr>
<tr class="separator:a9e10f04158ceed191b910e1efddfe4ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8afff528125f37a0b048136e2ce5cc4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#ab8afff528125f37a0b048136e2ce5cc4">HC_DEST_MASK</a>&#160;&#160;&#160;0x1F</td></tr>
<tr class="memdesc:ab8afff528125f37a0b048136e2ce5cc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destination address mask.  <a href="#ab8afff528125f37a0b048136e2ce5cc4">More...</a><br /></td></tr>
<tr class="separator:ab8afff528125f37a0b048136e2ce5cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab61dfa6fbff9ac2fc0aa9da05fcc7cd2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#ab61dfa6fbff9ac2fc0aa9da05fcc7cd2">HC_SRC_MASK</a>&#160;&#160;&#160;0x3E0</td></tr>
<tr class="memdesc:ab61dfa6fbff9ac2fc0aa9da05fcc7cd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Source address mask.  <a href="#ab61dfa6fbff9ac2fc0aa9da05fcc7cd2">More...</a><br /></td></tr>
<tr class="separator:ab61dfa6fbff9ac2fc0aa9da05fcc7cd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d88f3f0de8e039c6dc3c45f8abd3abd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a1d88f3f0de8e039c6dc3c45f8abd3abd">HC_SRC_OFFSET</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:a1d88f3f0de8e039c6dc3c45f8abd3abd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Source address offset.  <a href="#a1d88f3f0de8e039c6dc3c45f8abd3abd">More...</a><br /></td></tr>
<tr class="separator:a1d88f3f0de8e039c6dc3c45f8abd3abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34873c1aba414e6dd96c5de9a4f0312f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a34873c1aba414e6dd96c5de9a4f0312f">HC_RESERVED_BIT</a>&#160;&#160;&#160;0x400</td></tr>
<tr class="memdesc:a34873c1aba414e6dd96c5de9a4f0312f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserved ID bit.  <a href="#a34873c1aba414e6dd96c5de9a4f0312f">More...</a><br /></td></tr>
<tr class="separator:a34873c1aba414e6dd96c5de9a4f0312f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a70407d5bc18ded0404e320babcc6e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a2a70407d5bc18ded0404e320babcc6e7">HC_RESERVED_BIT_OFFSET</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a2a70407d5bc18ded0404e320babcc6e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserved ID bit offset.  <a href="#a2a70407d5bc18ded0404e320babcc6e7">More...</a><br /></td></tr>
<tr class="separator:a2a70407d5bc18ded0404e320babcc6e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a754ab483b49c6ac97b5221edd57edda5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a754ab483b49c6ac97b5221edd57edda5">HC_BROADCAST_ADDR</a>&#160;&#160;&#160;0x1F</td></tr>
<tr class="memdesc:a754ab483b49c6ac97b5221edd57edda5"><td class="mdescLeft">&#160;</td><td class="mdescRight">HandyCAN broadcast address.  <a href="#a754ab483b49c6ac97b5221edd57edda5">More...</a><br /></td></tr>
<tr class="separator:a754ab483b49c6ac97b5221edd57edda5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487447ad0a2b835335cf61f56ecccd5f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a487447ad0a2b835335cf61f56ecccd5f">HC_CAN_SEND_TIMEOUT</a>&#160;&#160;&#160;0xFFFFF</td></tr>
<tr class="memdesc:a487447ad0a2b835335cf61f56ecccd5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN transmit timeout (unused at the moment)  <a href="#a487447ad0a2b835335cf61f56ecccd5f">More...</a><br /></td></tr>
<tr class="separator:a487447ad0a2b835335cf61f56ecccd5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9e2fcc5dc025b44bc91e525b0fad81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a1b9e2fcc5dc025b44bc91e525b0fad81">HC_KEEP_STATISTICS</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a1b9e2fcc5dc025b44bc91e525b0fad81"><td class="mdescLeft">&#160;</td><td class="mdescRight">If this is set to 1, statistsics are kept.  <a href="#a1b9e2fcc5dc025b44bc91e525b0fad81">More...</a><br /></td></tr>
<tr class="separator:a1b9e2fcc5dc025b44bc91e525b0fad81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5d90e8f6f4ebe4f190c2ece58e8b7f59"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a5d90e8f6f4ebe4f190c2ece58e8b7f59">HandyCAN_init</a> (CAN_TypeDef *CANx, uint8_t local_addr, uint8_t CAN_Mode, IRQn_Type FIFO0_IRQ, IRQn_Type FIFO1_IRQ)</td></tr>
<tr class="memdesc:a5d90e8f6f4ebe4f190c2ece58e8b7f59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes handyCAN to a specific CAN peripheral.  <a href="#a5d90e8f6f4ebe4f190c2ece58e8b7f59">More...</a><br /></td></tr>
<tr class="separator:a5d90e8f6f4ebe4f190c2ece58e8b7f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec28704a5cdc3b7eabe71a58861dc67"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a4ec28704a5cdc3b7eabe71a58861dc67">HandyCAN_transmit</a> (uint8_t destination, uint8_t *data, uint8_t len)</td></tr>
<tr class="separator:a4ec28704a5cdc3b7eabe71a58861dc67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad42907fee064c6c6d92e5711665ce715"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#ad42907fee064c6c6d92e5711665ce715">HandyCAN_recievePackage</a> (uint8_t FIFONumber, struct <a class="el" href="structHandyCAN__package.html">HandyCAN_package</a> *package)</td></tr>
<tr class="memdesc:ad42907fee064c6c6d92e5711665ce715"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes a CAN Message and translates it into a HandyCAN packet.  <a href="#ad42907fee064c6c6d92e5711665ce715">More...</a><br /></td></tr>
<tr class="separator:ad42907fee064c6c6d92e5711665ce715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27f95fb5aa461b6407ea3495ed520676"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a27f95fb5aa461b6407ea3495ed520676">HandyCAN_remainingMailboxes</a> (void)</td></tr>
<tr class="memdesc:a27f95fb5aa461b6407ea3495ed520676"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check how many mailboxes there are available.  <a href="#a27f95fb5aa461b6407ea3495ed520676">More...</a><br /></td></tr>
<tr class="separator:a27f95fb5aa461b6407ea3495ed520676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb259562c98c39664ff91a31344b84f"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#afbb259562c98c39664ff91a31344b84f">HandyCAN_isTransmitting</a> (void)</td></tr>
<tr class="memdesc:afbb259562c98c39664ff91a31344b84f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there are packets currently being transmitted.  <a href="#afbb259562c98c39664ff91a31344b84f">More...</a><br /></td></tr>
<tr class="separator:afbb259562c98c39664ff91a31344b84f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a004f974fccbd198af143936a7c48f3"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a0a004f974fccbd198af143936a7c48f3">HandyCAN_sentPackets</a> (void)</td></tr>
<tr class="memdesc:a0a004f974fccbd198af143936a7c48f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the amount of packages sent since init  <a href="#a0a004f974fccbd198af143936a7c48f3">More...</a><br /></td></tr>
<tr class="separator:a0a004f974fccbd198af143936a7c48f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbdb74ab926ecca79da63efb85e2d7ae"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#afbdb74ab926ecca79da63efb85e2d7ae">HandyCAN_recievedPackets</a> (void)</td></tr>
<tr class="memdesc:afbdb74ab926ecca79da63efb85e2d7ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the amount of packages received since init  <a href="#afbdb74ab926ecca79da63efb85e2d7ae">More...</a><br /></td></tr>
<tr class="separator:afbdb74ab926ecca79da63efb85e2d7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c83c1dc84bfba1b35fa743e9198bd7"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#ad5c83c1dc84bfba1b35fa743e9198bd7">HandyCAN_failCount</a> (void)</td></tr>
<tr class="memdesc:ad5c83c1dc84bfba1b35fa743e9198bd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the failures since init  <a href="#ad5c83c1dc84bfba1b35fa743e9198bd7">More...</a><br /></td></tr>
<tr class="separator:ad5c83c1dc84bfba1b35fa743e9198bd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cfc5610520a0d869e1a110564f21ac5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a8cfc5610520a0d869e1a110564f21ac5">HandyCAN_dumpRxPackage</a> (struct <a class="el" href="structHandyCAN__package.html">HandyCAN_package</a> *package)</td></tr>
<tr class="memdesc:a8cfc5610520a0d869e1a110564f21ac5"><td class="mdescLeft">&#160;</td><td class="mdescRight">For debug. Dumps a received HandyCAN Packet to STDOUT.  <a href="#a8cfc5610520a0d869e1a110564f21ac5">More...</a><br /></td></tr>
<tr class="separator:a8cfc5610520a0d869e1a110564f21ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d23a84ff5039ba1fee68b8af2c783b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HandyCAN_8h.html#a4d23a84ff5039ba1fee68b8af2c783b5">HandyCAN_dumpCanRxMessage</a> (CanRxMsg *rx_msg)</td></tr>
<tr class="memdesc:a4d23a84ff5039ba1fee68b8af2c783b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">For debug. Dumps a received can message to STDOUT.  <a href="#a4d23a84ff5039ba1fee68b8af2c783b5">More...</a><br /></td></tr>
<tr class="separator:a4d23a84ff5039ba1fee68b8af2c783b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HandyCAN node library. </p>
<dl class="section author"><dt>Author</dt><dd>SirVolta </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Sep 18, 2017 </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Function descriptions are in source file </dd></dl>

<p class="definition">Definition in file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a754ab483b49c6ac97b5221edd57edda5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a754ab483b49c6ac97b5221edd57edda5">&#9670;&nbsp;</a></span>HC_BROADCAST_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_BROADCAST_ADDR&#160;&#160;&#160;0x1F</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HandyCAN broadcast address. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00047">47</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="HandyCAN_8c_source.html#l00401">HandyCAN_dumpRxPackage()</a>, <a class="el" href="HandyCAN_8c_source.html#l00070">HandyCAN_init()</a>, and <a class="el" href="main_8c_source.html#l00094">main()</a>.</p>

</div>
</div>
<a id="a487447ad0a2b835335cf61f56ecccd5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a487447ad0a2b835335cf61f56ecccd5f">&#9670;&nbsp;</a></span>HC_CAN_SEND_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_CAN_SEND_TIMEOUT&#160;&#160;&#160;0xFFFFF</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CAN transmit timeout (unused at the moment) </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00050">50</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

</div>
</div>
<a id="ab8afff528125f37a0b048136e2ce5cc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8afff528125f37a0b048136e2ce5cc4">&#9670;&nbsp;</a></span>HC_DEST_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_DEST_MASK&#160;&#160;&#160;0x1F</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destination address mask. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00034">34</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="HandyCAN_8c_source.html#l00169">HandyCAN_recievePackage()</a>.</p>

</div>
</div>
<a id="a1b9e2fcc5dc025b44bc91e525b0fad81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b9e2fcc5dc025b44bc91e525b0fad81">&#9670;&nbsp;</a></span>HC_KEEP_STATISTICS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_KEEP_STATISTICS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If this is set to 1, statistsics are kept. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00053">53</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

</div>
</div>
<a id="a34873c1aba414e6dd96c5de9a4f0312f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34873c1aba414e6dd96c5de9a4f0312f">&#9670;&nbsp;</a></span>HC_RESERVED_BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_RESERVED_BIT&#160;&#160;&#160;0x400</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserved ID bit. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00042">42</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

</div>
</div>
<a id="a2a70407d5bc18ded0404e320babcc6e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a70407d5bc18ded0404e320babcc6e7">&#9670;&nbsp;</a></span>HC_RESERVED_BIT_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_RESERVED_BIT_OFFSET&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserved ID bit offset. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00044">44</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

</div>
</div>
<a id="ab61dfa6fbff9ac2fc0aa9da05fcc7cd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab61dfa6fbff9ac2fc0aa9da05fcc7cd2">&#9670;&nbsp;</a></span>HC_SRC_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_SRC_MASK&#160;&#160;&#160;0x3E0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Source address mask. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00037">37</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="HandyCAN_8c_source.html#l00169">HandyCAN_recievePackage()</a>.</p>

</div>
</div>
<a id="a1d88f3f0de8e039c6dc3c45f8abd3abd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d88f3f0de8e039c6dc3c45f8abd3abd">&#9670;&nbsp;</a></span>HC_SRC_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_SRC_OFFSET&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Source address offset. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00039">39</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="HandyCAN_8c_source.html#l00169">HandyCAN_recievePackage()</a>, and <a class="el" href="HandyCAN_8c_source.html#l00272">HandyCAN_transmit()</a>.</p>

</div>
</div>
<a id="a9e10f04158ceed191b910e1efddfe4ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e10f04158ceed191b910e1efddfe4ad">&#9670;&nbsp;</a></span>HC_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HC_VERSION&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The current version of handycan. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8h_source.html#l00031">31</a> of file <a class="el" href="HandyCAN_8h_source.html">HandyCAN.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4d23a84ff5039ba1fee68b8af2c783b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d23a84ff5039ba1fee68b8af2c783b5">&#9670;&nbsp;</a></span>HandyCAN_dumpCanRxMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HandyCAN_dumpCanRxMessage </td>
          <td>(</td>
          <td class="paramtype">CanRxMsg *&#160;</td>
          <td class="paramname"><em>rx_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For debug. Dumps a received can message to STDOUT. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_msg</td><td>incoming can message to dump </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00423">423</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  trace_printf(<span class="stringliteral">&quot;StdId: %#x\n&quot;</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;           <span class="stringliteral">&quot;ExtID: %#x\n&quot;</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;           <span class="stringliteral">&quot;IDE: %#x\n&quot;</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;           <span class="stringliteral">&quot;RTR: %#x\n&quot;</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;           <span class="stringliteral">&quot;DLC: %u\n&quot;</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;           <span class="stringliteral">&quot;FMI: %#x\n&quot;</span>,</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;           rx_msg-&gt;StdId, rx_msg-&gt;ExtId, rx_msg-&gt;IDE, rx_msg-&gt;RTR,</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;           rx_msg-&gt;DLC, rx_msg-&gt;FMI);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 8; i++)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    trace_printf(<span class="stringliteral">&quot;Data[%u]: %#x %u\n&quot;</span>, i, rx_msg-&gt;Data[i], rx_msg-&gt;Data[i]);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a8cfc5610520a0d869e1a110564f21ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cfc5610520a0d869e1a110564f21ac5">&#9670;&nbsp;</a></span>HandyCAN_dumpRxPackage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HandyCAN_dumpRxPackage </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structHandyCAN__package.html">HandyCAN_package</a> *&#160;</td>
          <td class="paramname"><em>package</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For debug. Dumps a received HandyCAN Packet to STDOUT. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">package</td><td>incoming handyCAN package to dump </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00401">401</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>

<p class="reference">References <a class="el" href="HandyCAN_8h_source.html#l00065">HandyCAN_package::data</a>, <a class="el" href="HandyCAN_8h_source.html#l00059">HandyCAN_package::dest_adress</a>, <a class="el" href="HandyCAN_8h_source.html#l00047">HC_BROADCAST_ADDR</a>, <a class="el" href="HandyCAN_8h_source.html#l00063">HandyCAN_package::len</a>, and <a class="el" href="HandyCAN_8h_source.html#l00061">HandyCAN_package::source_adress</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00077">CAN1_RX1_IRQHandler()</a>, and <a class="el" href="main_8c_source.html#l00063">USB_LP_CAN1_RX0_IRQHandler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span> (package-&gt;<a class="code" href="structHandyCAN__package.html#a6d946fd9aaa65f5f8801b6ebc1bd3839">dest_adress</a> == <a class="code" href="HandyCAN_8h.html#a754ab483b49c6ac97b5221edd57edda5">HC_BROADCAST_ADDR</a>)</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      trace_printf(<span class="stringliteral">&quot;Incoming BROADCAST from %#x with intent: %u\n&quot;</span>,</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;           package-&gt;<a class="code" href="structHandyCAN__package.html#a8b5b61d94883ad7b831f6cab0ad76387">source_adress</a>, package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[0]);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      trace_printf(<span class="stringliteral">&quot;Received message from %#x with intent: %u\n&quot;</span>,</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;           package-&gt;<a class="code" href="structHandyCAN__package.html#a8b5b61d94883ad7b831f6cab0ad76387">source_adress</a>, package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[0]);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 1; i &lt; package-&gt;<a class="code" href="structHandyCAN__package.html#ada9e229195f146752e5ec1c6536f6c74">len</a>; i++)</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    trace_printf(<span class="stringliteral">&quot;Data[%u]: %#x %u\n&quot;</span>, i, package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[i], package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[i]);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div><div class="ttc" id="structHandyCAN__package_html_a8b5b61d94883ad7b831f6cab0ad76387"><div class="ttname"><a href="structHandyCAN__package.html#a8b5b61d94883ad7b831f6cab0ad76387">HandyCAN_package::source_adress</a></div><div class="ttdeci">uint8_t source_adress</div><div class="ttdoc">Source address. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00061">HandyCAN.h:61</a></div></div>
<div class="ttc" id="structHandyCAN__package_html_a6d946fd9aaa65f5f8801b6ebc1bd3839"><div class="ttname"><a href="structHandyCAN__package.html#a6d946fd9aaa65f5f8801b6ebc1bd3839">HandyCAN_package::dest_adress</a></div><div class="ttdeci">uint8_t dest_adress</div><div class="ttdoc">Destination address. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00059">HandyCAN.h:59</a></div></div>
<div class="ttc" id="structHandyCAN__package_html_a6312622202e0448060e5ce71f7e00216"><div class="ttname"><a href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">HandyCAN_package::data</a></div><div class="ttdeci">uint8_t data[8]</div><div class="ttdoc">Data array. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00065">HandyCAN.h:65</a></div></div>
<div class="ttc" id="HandyCAN_8h_html_a754ab483b49c6ac97b5221edd57edda5"><div class="ttname"><a href="HandyCAN_8h.html#a754ab483b49c6ac97b5221edd57edda5">HC_BROADCAST_ADDR</a></div><div class="ttdeci">#define HC_BROADCAST_ADDR</div><div class="ttdoc">HandyCAN broadcast address. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00047">HandyCAN.h:47</a></div></div>
<div class="ttc" id="structHandyCAN__package_html_ada9e229195f146752e5ec1c6536f6c74"><div class="ttname"><a href="structHandyCAN__package.html#ada9e229195f146752e5ec1c6536f6c74">HandyCAN_package::len</a></div><div class="ttdeci">uint8_t len</div><div class="ttdoc">Data length. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00063">HandyCAN.h:63</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="HandyCAN_8h_a8cfc5610520a0d869e1a110564f21ac5_icgraph.png" border="0" usemap="#HandyCAN_8h_a8cfc5610520a0d869e1a110564f21ac5_icgraph" alt=""/></div>
<map name="HandyCAN_8h_a8cfc5610520a0d869e1a110564f21ac5_icgraph" id="HandyCAN_8h_a8cfc5610520a0d869e1a110564f21ac5_icgraph">
<area shape="rect" id="node2" href="main_8c.html#aa1a82ca3e49421333b17a4ec6996d03d" title="Called when broadcast package is received. " alt="" coords="288,5,460,32"/>
<area shape="rect" id="node3" href="main_8c.html#af57bde854fa2b396f29664995a502b19" title="Called when package addressed to us is received. " alt="" coords="260,56,488,83"/>
</map>
</div>

</div>
</div>
<a id="ad5c83c1dc84bfba1b35fa743e9198bd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5c83c1dc84bfba1b35fa743e9198bd7">&#9670;&nbsp;</a></span>HandyCAN_failCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t HandyCAN_failCount </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the failures since init </p>
<dl class="section note"><dt>Note</dt><dd>returns 0 if statistics are disabled. Set <a class="el" href="HandyCAN_8h.html#a1b9e2fcc5dc025b44bc91e525b0fad81" title="If this is set to 1, statistsics are kept. ">HC_KEEP_STATISTICS</a> to 1 if required </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>amount of failures, 0 if disabled </dd></dl>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00387">387</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>

<p class="reference">References <a class="el" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#if HC_KEEP_STATISTICS</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.failures;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="ttc" id="HandyCAN_8c_html_a986744dfdce165812f21d495ef16fb12"><div class="ttname"><a href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a></div><div class="ttdeci">static struct HandyCAN_config handycan</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d90e8f6f4ebe4f190c2ece58e8b7f59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d90e8f6f4ebe4f190c2ece58e8b7f59">&#9670;&nbsp;</a></span>HandyCAN_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t HandyCAN_init </td>
          <td>(</td>
          <td class="paramtype">CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>CANx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>local_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>CAN_Mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IRQn_Type&#160;</td>
          <td class="paramname"><em>FIFO0_IRQ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IRQn_Type&#160;</td>
          <td class="paramname"><em>FIFO1_IRQ</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes handyCAN to a specific CAN peripheral. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">CANx</td><td>the can peripheral to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_addr</td><td>the address of this node </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">CAN_Mode</td><td>mode to initialize the CAN peripheral into </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">FIFO0_IRQ</td><td>interrupt channel of own address FIFO. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">FIFO1_IRQ</td><td>interrupt channel of broadcast FIFO. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Takes over full access of the CAN peripheral. GPIO setup is to be done in user application. If using CAN2, change the interrupt function names accordingly. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0: ok, </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Error handling, check can init </dd></dl>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00070">70</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>

<p class="reference">References <a class="el" href="stm32f10x__conf_8h_source.html#l00053">assert_param</a>, <a class="el" href="HandyCAN_8c_source.html#l00052">HandyCAN_config::CANx</a>, <a class="el" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>, <a class="el" href="HandyCAN_8h_source.html#l00047">HC_BROADCAST_ADDR</a>, and <a class="el" href="HandyCAN_8c_source.html#l00050">HandyCAN_config::local_address</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00094">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  CAN_InitTypeDef CAN_InitStruct;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  NVIC_InitTypeDef NVIC_InitStruct;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  CAN_FilterInitTypeDef CAN_FilterInitStruct;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="stm32f10x__conf_8h.html#a631dea7b230e600555f979c62af1de21">assert_param</a>(IS_CAN_ALL_PERIPH(CANx));</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">//Address must be in between 0x01 and 0x1E (1 and 30), 29 possible.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="stm32f10x__conf_8h.html#a631dea7b230e600555f979c62af1de21">assert_param</a>(local_addr &lt; 0x1F);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="stm32f10x__conf_8h.html#a631dea7b230e600555f979c62af1de21">assert_param</a>(local_addr != 0x1F);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="stm32f10x__conf_8h.html#a631dea7b230e600555f979c62af1de21">assert_param</a>(local_addr != 0x00);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="stm32f10x__conf_8h.html#a631dea7b230e600555f979c62af1de21">assert_param</a>(IS_CAN_MODE(CAN_Mode));</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a> = CANx;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#a6ed0a84d6432078fde0ecf0c8b78936a">local_address</a> = local_addr;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#if HC_KEEP_STATISTICS</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.tx_packets = 0;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.rx_packets = 0;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.failures = 0;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">//Configure the CAN</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  CAN_DeInit(<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  CAN_StructInit(&amp;CAN_InitStruct);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  CAN_InitStruct.CAN_TTCM = DISABLE;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  CAN_InitStruct.CAN_ABOM = DISABLE;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  CAN_InitStruct.CAN_AWUM = DISABLE;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  CAN_InitStruct.CAN_NART = DISABLE;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  CAN_InitStruct.CAN_RFLM = DISABLE;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  CAN_InitStruct.CAN_TXFP = DISABLE;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  CAN_InitStruct.CAN_Mode = CAN_Mode;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  CAN_InitStruct.CAN_SJW = CAN_SJW_1tq;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  CAN_InitStruct.CAN_BS1 = CAN_BS1_3tq;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  CAN_InitStruct.CAN_BS2 = CAN_BS2_5tq;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  CAN_InitStruct.CAN_Prescaler = 4; <span class="comment">//4: 1M, 8: 500k</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  CAN_Init(<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>, &amp;CAN_InitStruct);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// Set the filter to receive everything addressed to us into FIFO0</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  CAN_FilterInitStruct.CAN_FilterNumber = 0;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  CAN_FilterInitStruct.CAN_FilterMode = CAN_FilterMode_IdMask;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  CAN_FilterInitStruct.CAN_FilterScale = CAN_FilterScale_32bit;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// match our address into bits 0..4 of the 11 id bits</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// shift 5 to the left, as this is a 32bit register</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  CAN_FilterInitStruct.CAN_FilterIdHigh = <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#a6ed0a84d6432078fde0ecf0c8b78936a">local_address</a> &lt;&lt; 5;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  CAN_FilterInitStruct.CAN_FilterIdLow = 0;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// only look at bit 0..4 of the id bits</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  CAN_FilterInitStruct.CAN_FilterMaskIdHigh = 0x1F &lt;&lt; 5;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  CAN_FilterInitStruct.CAN_FilterMaskIdLow = 0x0000;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  CAN_FilterInitStruct.CAN_FilterFIFOAssignment = 0;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  CAN_FilterInitStruct.CAN_FilterActivation = ENABLE;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  CAN_FilterInit(&amp;CAN_FilterInitStruct);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// Set the filter to receive broadcast into FIFO1</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  CAN_FilterInitStruct.CAN_FilterNumber = 1;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  CAN_FilterInitStruct.CAN_FilterMode = CAN_FilterMode_IdMask;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  CAN_FilterInitStruct.CAN_FilterScale = CAN_FilterScale_32bit;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// match broadcast address in bits 0..4 of the id bits</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// shift 5 to the left as it is a 32 bit register</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  CAN_FilterInitStruct.CAN_FilterIdHigh = <a class="code" href="HandyCAN_8h.html#a754ab483b49c6ac97b5221edd57edda5">HC_BROADCAST_ADDR</a> &lt;&lt; 5; <span class="comment">// broadcast address</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  CAN_FilterInitStruct.CAN_FilterIdLow = 0;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// match only bit 0 to 4 in the id section</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  CAN_FilterInitStruct.CAN_FilterMaskIdHigh = 0x1F &lt;&lt; 5;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  CAN_FilterInitStruct.CAN_FilterMaskIdLow = 0x0000;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  CAN_FilterInitStruct.CAN_FilterFIFOAssignment = 1;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  CAN_FilterInitStruct.CAN_FilterActivation = ENABLE;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  CAN_FilterInit(&amp;CAN_FilterInitStruct);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">//Setup receive interrupt for FIFO0(own address) data</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  NVIC_InitStruct.NVIC_IRQChannel = FIFO0_IRQ;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  NVIC_InitStruct.NVIC_IRQChannelPreemptionPriority = 0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  NVIC_InitStruct.NVIC_IRQChannelSubPriority = 0;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  NVIC_InitStruct.NVIC_IRQChannelCmd = ENABLE;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  NVIC_Init(&amp;NVIC_InitStruct);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  CAN_ITConfig(<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>, CAN_IT_FMP0, ENABLE);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  NVIC_EnableIRQ(FIFO0_IRQ);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">//Setup for FIFO1(broadcast) data</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  NVIC_InitStruct.NVIC_IRQChannel = FIFO1_IRQ;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  NVIC_InitStruct.NVIC_IRQChannelPreemptionPriority = 0;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  NVIC_InitStruct.NVIC_IRQChannelSubPriority = 0;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  NVIC_InitStruct.NVIC_IRQChannelCmd = ENABLE;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  NVIC_Init(&amp;NVIC_InitStruct);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  CAN_ITConfig(<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>, CAN_IT_FMP1, ENABLE);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  NVIC_EnableIRQ(FIFO1_IRQ);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="ttc" id="structHandyCAN__config_html_a6ed0a84d6432078fde0ecf0c8b78936a"><div class="ttname"><a href="structHandyCAN__config.html#a6ed0a84d6432078fde0ecf0c8b78936a">HandyCAN_config::local_address</a></div><div class="ttdeci">uint8_t local_address</div><div class="ttdoc">Address of this node. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8c_source.html#l00050">HandyCAN.c:50</a></div></div>
<div class="ttc" id="HandyCAN_8c_html_a986744dfdce165812f21d495ef16fb12"><div class="ttname"><a href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a></div><div class="ttdeci">static struct HandyCAN_config handycan</div></div>
<div class="ttc" id="structHandyCAN__config_html_aecd2f067deef264f7802c2199eed0e33"><div class="ttname"><a href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">HandyCAN_config::CANx</a></div><div class="ttdeci">CAN_TypeDef * CANx</div><div class="ttdoc">CAN peripheral to use. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8c_source.html#l00052">HandyCAN.c:52</a></div></div>
<div class="ttc" id="stm32f10x__conf_8h_html_a631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="stm32f10x__conf_8h.html#a631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdoc">The assert_param macro is used for function&amp;#39;s parameters check. </div><div class="ttdef"><b>Definition:</b> <a href="stm32f10x__conf_8h_source.html#l00053">stm32f10x_conf.h:53</a></div></div>
<div class="ttc" id="HandyCAN_8h_html_a754ab483b49c6ac97b5221edd57edda5"><div class="ttname"><a href="HandyCAN_8h.html#a754ab483b49c6ac97b5221edd57edda5">HC_BROADCAST_ADDR</a></div><div class="ttdeci">#define HC_BROADCAST_ADDR</div><div class="ttdoc">HandyCAN broadcast address. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00047">HandyCAN.h:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="HandyCAN_8h_a5d90e8f6f4ebe4f190c2ece58e8b7f59_icgraph.png" border="0" usemap="#HandyCAN_8h_a5d90e8f6f4ebe4f190c2ece58e8b7f59_icgraph" alt=""/></div>
<map name="HandyCAN_8h_a5d90e8f6f4ebe4f190c2ece58e8b7f59_icgraph" id="HandyCAN_8h_a5d90e8f6f4ebe4f190c2ece58e8b7f59_icgraph">
<area shape="rect" id="node2" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="173,5,228,32"/>
</map>
</div>

</div>
</div>
<a id="afbb259562c98c39664ff91a31344b84f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb259562c98c39664ff91a31344b84f">&#9670;&nbsp;</a></span>HandyCAN_isTransmitting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t HandyCAN_isTransmitting </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if there are packets currently being transmitted. </p>
<dl class="section note"><dt>Note</dt><dd>checks if there is a mailbox in use </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>1: transmit packet queued. 0: idle. </dd></dl>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00343">343</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>

<p class="reference">References <a class="el" href="HandyCAN_8c_source.html#l00244">HandyCAN_remainingMailboxes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;{</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HandyCAN_8c.html#a27f95fb5aa461b6407ea3495ed520676">HandyCAN_remainingMailboxes</a>() &lt; 3)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="ttc" id="HandyCAN_8c_html_a27f95fb5aa461b6407ea3495ed520676"><div class="ttname"><a href="HandyCAN_8c.html#a27f95fb5aa461b6407ea3495ed520676">HandyCAN_remainingMailboxes</a></div><div class="ttdeci">int8_t HandyCAN_remainingMailboxes(void)</div><div class="ttdoc">Check how many mailboxes there are available. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8c_source.html#l00244">HandyCAN.c:244</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="HandyCAN_8h_afbb259562c98c39664ff91a31344b84f_cgraph.png" border="0" usemap="#HandyCAN_8h_afbb259562c98c39664ff91a31344b84f_cgraph" alt=""/></div>
<map name="HandyCAN_8h_afbb259562c98c39664ff91a31344b84f_cgraph" id="HandyCAN_8h_afbb259562c98c39664ff91a31344b84f_cgraph">
<area shape="rect" id="node2" href="HandyCAN_8c.html#a27f95fb5aa461b6407ea3495ed520676" title="Check how many mailboxes there are available. " alt="" coords="244,5,475,32"/>
</map>
</div>

</div>
</div>
<a id="afbdb74ab926ecca79da63efb85e2d7ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbdb74ab926ecca79da63efb85e2d7ae">&#9670;&nbsp;</a></span>HandyCAN_recievedPackets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t HandyCAN_recievedPackets </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the amount of packages received since init </p>
<dl class="section note"><dt>Note</dt><dd>returns 0 if statistics are disabled. Set <a class="el" href="HandyCAN_8h.html#a1b9e2fcc5dc025b44bc91e525b0fad81" title="If this is set to 1, statistsics are kept. ">HC_KEEP_STATISTICS</a> to 1 if required </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>amount of packages received, 0 if disabled </dd></dl>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00372">372</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>

<p class="reference">References <a class="el" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.</p>
<div class="fragment"><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;{</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#if HC_KEEP_STATISTICS</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.rx_packets;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div><div class="ttc" id="HandyCAN_8c_html_a986744dfdce165812f21d495ef16fb12"><div class="ttname"><a href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a></div><div class="ttdeci">static struct HandyCAN_config handycan</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad42907fee064c6c6d92e5711665ce715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad42907fee064c6c6d92e5711665ce715">&#9670;&nbsp;</a></span>HandyCAN_recievePackage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int8_t HandyCAN_recievePackage </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>FIFONumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structHandyCAN__package.html">HandyCAN_package</a> *&#160;</td>
          <td class="paramname"><em>package</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Takes a CAN Message and translates it into a HandyCAN packet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">FIFONumber</td><td>Which FIFO to read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">package</td><td>output HandyCAN package </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Parts taken from MCD library </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0: ok, -1 error, -2 non handyCAN message </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Error handling, improve reading data from RDxR register </dd></dl>
<p>HandyCAN only uses the standard ID. </p>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00169">169</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>

<p class="reference">References <a class="el" href="stm32f10x__conf_8h_source.html#l00053">assert_param</a>, <a class="el" href="HandyCAN_8c_source.html#l00052">HandyCAN_config::CANx</a>, <a class="el" href="HandyCAN_8h_source.html#l00065">HandyCAN_package::data</a>, <a class="el" href="HandyCAN_8h_source.html#l00059">HandyCAN_package::dest_adress</a>, <a class="el" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>, <a class="el" href="HandyCAN_8h_source.html#l00034">HC_DEST_MASK</a>, <a class="el" href="HandyCAN_8h_source.html#l00037">HC_SRC_MASK</a>, <a class="el" href="HandyCAN_8h_source.html#l00039">HC_SRC_OFFSET</a>, <a class="el" href="HandyCAN_8h_source.html#l00063">HandyCAN_package::len</a>, and <a class="el" href="HandyCAN_8h_source.html#l00061">HandyCAN_package::source_adress</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00077">CAN1_RX1_IRQHandler()</a>, and <a class="el" href="main_8c_source.html#l00063">USB_LP_CAN1_RX0_IRQHandler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// The standard identifier. This is between 0 and 0x7FF and will contain addressing data</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  uint32_t StdId;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// The type of identifier for the message being received.</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// HandyCAN only uses the standard ID</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  uint8_t IDE;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">//Type of frame for the recieved message, CAN_remote_transmission_request</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">//uint8_t RTR;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">//The index of the filter that was used to match this message. Can be 0 to 0xFF</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">//uint8_t FMI;</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="stm32f10x__conf_8h.html#a631dea7b230e600555f979c62af1de21">assert_param</a>(IS_CAN_FIFO(FIFONumber));</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  IDE = (uint8_t) 0x04 &amp; <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RIR;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  if (IDE != CAN_Id_Standard)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#if HC_KEEP_STATISTICS</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.failures++;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  StdId = (uint32_t) 0x000007FF</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      &amp; (<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RIR &gt;&gt; 21);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">//These are not used at the moment</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">//FMI = (uint8_t) 0xFF &amp; (handycan.CANx-&gt;sFIFOMailBox[FIFONumber].RDTR &gt;&gt; 8);</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">//RTR = (uint8_t) 0x02 &amp; handycan.CANx-&gt;sFIFOMailBox[FIFONumber].RIR;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">//Get the package data length</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#ada9e229195f146752e5ec1c6536f6c74">len</a> = (uint8_t) 0x0F &amp; <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDTR;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">//Retrieve the data. TODO: optimize this.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[0] = (uint8_t) 0xFF</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      &amp; <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDLR;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[1] = (uint8_t) 0xFF</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      &amp; (<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDLR &gt;&gt; 8);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[2] = (uint8_t) 0xFF</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      &amp; (<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDLR &gt;&gt; 16);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[3] = (uint8_t) 0xFF</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      &amp; (<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDLR &gt;&gt; 24);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[4] = (uint8_t) 0xFF</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      &amp; <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDHR;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[5] = (uint8_t) 0xFF</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      &amp; (<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDHR &gt;&gt; 8);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[6] = (uint8_t) 0xFF</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      &amp; (<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDHR &gt;&gt; 16);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">data</a>[7] = (uint8_t) 0xFF</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      &amp; (<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;sFIFOMailBox[FIFONumber].RDHR &gt;&gt; 24);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">//Release the FIFO mailbox</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span> (FIFONumber == CAN_FIFO0)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;RF0R |= CAN_RF0R_RFOM0;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;RF1R |= CAN_RF1R_RFOM1;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// Decode the addresses</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// Again STDID first 5 bits destination address, then 5 bits source addr, then 1 reserved</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a8b5b61d94883ad7b831f6cab0ad76387">source_adress</a> = (StdId &amp; <a class="code" href="HandyCAN_8h.html#ab61dfa6fbff9ac2fc0aa9da05fcc7cd2">HC_SRC_MASK</a>) &gt;&gt; <a class="code" href="HandyCAN_8h.html#a1d88f3f0de8e039c6dc3c45f8abd3abd">HC_SRC_OFFSET</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  package-&gt;<a class="code" href="structHandyCAN__package.html#a6d946fd9aaa65f5f8801b6ebc1bd3839">dest_adress</a> = StdId &amp; <a class="code" href="HandyCAN_8h.html#ab8afff528125f37a0b048136e2ce5cc4">HC_DEST_MASK</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#if HC_KEEP_STATISTICS</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.rx_packets++;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="ttc" id="structHandyCAN__package_html_a8b5b61d94883ad7b831f6cab0ad76387"><div class="ttname"><a href="structHandyCAN__package.html#a8b5b61d94883ad7b831f6cab0ad76387">HandyCAN_package::source_adress</a></div><div class="ttdeci">uint8_t source_adress</div><div class="ttdoc">Source address. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00061">HandyCAN.h:61</a></div></div>
<div class="ttc" id="HandyCAN_8c_html_a986744dfdce165812f21d495ef16fb12"><div class="ttname"><a href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a></div><div class="ttdeci">static struct HandyCAN_config handycan</div></div>
<div class="ttc" id="HandyCAN_8h_html_ab61dfa6fbff9ac2fc0aa9da05fcc7cd2"><div class="ttname"><a href="HandyCAN_8h.html#ab61dfa6fbff9ac2fc0aa9da05fcc7cd2">HC_SRC_MASK</a></div><div class="ttdeci">#define HC_SRC_MASK</div><div class="ttdoc">Source address mask. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00037">HandyCAN.h:37</a></div></div>
<div class="ttc" id="structHandyCAN__package_html_a6d946fd9aaa65f5f8801b6ebc1bd3839"><div class="ttname"><a href="structHandyCAN__package.html#a6d946fd9aaa65f5f8801b6ebc1bd3839">HandyCAN_package::dest_adress</a></div><div class="ttdeci">uint8_t dest_adress</div><div class="ttdoc">Destination address. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00059">HandyCAN.h:59</a></div></div>
<div class="ttc" id="HandyCAN_8h_html_a1d88f3f0de8e039c6dc3c45f8abd3abd"><div class="ttname"><a href="HandyCAN_8h.html#a1d88f3f0de8e039c6dc3c45f8abd3abd">HC_SRC_OFFSET</a></div><div class="ttdeci">#define HC_SRC_OFFSET</div><div class="ttdoc">Source address offset. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00039">HandyCAN.h:39</a></div></div>
<div class="ttc" id="structHandyCAN__config_html_aecd2f067deef264f7802c2199eed0e33"><div class="ttname"><a href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">HandyCAN_config::CANx</a></div><div class="ttdeci">CAN_TypeDef * CANx</div><div class="ttdoc">CAN peripheral to use. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8c_source.html#l00052">HandyCAN.c:52</a></div></div>
<div class="ttc" id="structHandyCAN__package_html_a6312622202e0448060e5ce71f7e00216"><div class="ttname"><a href="structHandyCAN__package.html#a6312622202e0448060e5ce71f7e00216">HandyCAN_package::data</a></div><div class="ttdeci">uint8_t data[8]</div><div class="ttdoc">Data array. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00065">HandyCAN.h:65</a></div></div>
<div class="ttc" id="stm32f10x__conf_8h_html_a631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="stm32f10x__conf_8h.html#a631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdoc">The assert_param macro is used for function&amp;#39;s parameters check. </div><div class="ttdef"><b>Definition:</b> <a href="stm32f10x__conf_8h_source.html#l00053">stm32f10x_conf.h:53</a></div></div>
<div class="ttc" id="structHandyCAN__package_html_ada9e229195f146752e5ec1c6536f6c74"><div class="ttname"><a href="structHandyCAN__package.html#ada9e229195f146752e5ec1c6536f6c74">HandyCAN_package::len</a></div><div class="ttdeci">uint8_t len</div><div class="ttdoc">Data length. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00063">HandyCAN.h:63</a></div></div>
<div class="ttc" id="HandyCAN_8h_html_ab8afff528125f37a0b048136e2ce5cc4"><div class="ttname"><a href="HandyCAN_8h.html#ab8afff528125f37a0b048136e2ce5cc4">HC_DEST_MASK</a></div><div class="ttdeci">#define HC_DEST_MASK</div><div class="ttdoc">Destination address mask. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8h_source.html#l00034">HandyCAN.h:34</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="HandyCAN_8h_ad42907fee064c6c6d92e5711665ce715_icgraph.png" border="0" usemap="#HandyCAN_8h_ad42907fee064c6c6d92e5711665ce715_icgraph" alt=""/></div>
<map name="HandyCAN_8h_ad42907fee064c6c6d92e5711665ce715_icgraph" id="HandyCAN_8h_ad42907fee064c6c6d92e5711665ce715_icgraph">
<area shape="rect" id="node2" href="main_8c.html#aa1a82ca3e49421333b17a4ec6996d03d" title="Called when broadcast package is received. " alt="" coords="283,5,455,32"/>
<area shape="rect" id="node3" href="main_8c.html#af57bde854fa2b396f29664995a502b19" title="Called when package addressed to us is received. " alt="" coords="255,56,483,83"/>
</map>
</div>

</div>
</div>
<a id="a27f95fb5aa461b6407ea3495ed520676"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27f95fb5aa461b6407ea3495ed520676">&#9670;&nbsp;</a></span>HandyCAN_remainingMailboxes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t HandyCAN_remainingMailboxes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check how many mailboxes there are available. </p>
<dl class="section note"><dt>Note</dt><dd>Tests if it is possible to transmit </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0: no, 1, one remaining, 2: 2 remaining, 3: 3 remaining </dd></dl>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00244">244</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>

<p class="reference">References <a class="el" href="HandyCAN_8c_source.html#l00052">HandyCAN_config::CANx</a>, and <a class="el" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.</p>

<p class="reference">Referenced by <a class="el" href="HandyCAN_8c_source.html#l00343">HandyCAN_isTransmitting()</a>, and <a class="el" href="main_8c_source.html#l00094">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  uint8_t transmit_mailbox_remaining;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;TSR &amp; CAN_TSR_TME0) == CAN_TSR_TME0)</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    transmit_mailbox_remaining = 3;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;TSR &amp; CAN_TSR_TME1) == CAN_TSR_TME1)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    transmit_mailbox_remaining = 2;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.<a class="code" href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">CANx</a>-&gt;TSR &amp; CAN_TSR_TME2) == CAN_TSR_TME2)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    transmit_mailbox_remaining = 1;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    transmit_mailbox_remaining = 0;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">return</span> transmit_mailbox_remaining;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div><div class="ttc" id="HandyCAN_8c_html_a986744dfdce165812f21d495ef16fb12"><div class="ttname"><a href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a></div><div class="ttdeci">static struct HandyCAN_config handycan</div></div>
<div class="ttc" id="structHandyCAN__config_html_aecd2f067deef264f7802c2199eed0e33"><div class="ttname"><a href="structHandyCAN__config.html#aecd2f067deef264f7802c2199eed0e33">HandyCAN_config::CANx</a></div><div class="ttdeci">CAN_TypeDef * CANx</div><div class="ttdoc">CAN peripheral to use. </div><div class="ttdef"><b>Definition:</b> <a href="HandyCAN_8c_source.html#l00052">HandyCAN.c:52</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="HandyCAN_8h_a27f95fb5aa461b6407ea3495ed520676_icgraph.png" border="0" usemap="#HandyCAN_8h_a27f95fb5aa461b6407ea3495ed520676_icgraph" alt=""/></div>
<map name="HandyCAN_8h_a27f95fb5aa461b6407ea3495ed520676_icgraph" id="HandyCAN_8h_a27f95fb5aa461b6407ea3495ed520676_icgraph">
<area shape="rect" id="node2" href="HandyCAN_8h.html#afbb259562c98c39664ff91a31344b84f" title="Check if there are packets currently being transmitted. " alt="" coords="284,5,475,32"/>
<area shape="rect" id="node3" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="352,56,407,83"/>
</map>
</div>

</div>
</div>
<a id="a0a004f974fccbd198af143936a7c48f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a004f974fccbd198af143936a7c48f3">&#9670;&nbsp;</a></span>HandyCAN_sentPackets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t HandyCAN_sentPackets </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the amount of packages sent since init </p>
<dl class="section note"><dt>Note</dt><dd>returns 0 if statistics are disabled. Set <a class="el" href="HandyCAN_8h.html#a1b9e2fcc5dc025b44bc91e525b0fad81" title="If this is set to 1, statistsics are kept. ">HC_KEEP_STATISTICS</a> to 1 if required </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>amount of packages sent, 0 if disabled </dd></dl>

<p class="definition">Definition at line <a class="el" href="HandyCAN_8c_source.html#l00357">357</a> of file <a class="el" href="HandyCAN_8c_source.html">HandyCAN.c</a>.</p>

<p class="reference">References <a class="el" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.</p>
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">#if HC_KEEP_STATISTICS</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a>.tx_packets;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div><div class="ttc" id="HandyCAN_8c_html_a986744dfdce165812f21d495ef16fb12"><div class="ttname"><a href="HandyCAN_8c.html#a986744dfdce165812f21d495ef16fb12">handycan</a></div><div class="ttdeci">static struct HandyCAN_config handycan</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ec28704a5cdc3b7eabe71a58861dc67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec28704a5cdc3b7eabe71a58861dc67">&#9670;&nbsp;</a></span>HandyCAN_transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t HandyCAN_transmit </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
